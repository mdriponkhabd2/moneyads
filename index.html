<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Telegram Mini App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    /* CSS RESET & BASE */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: "Segoe UI", Arial, sans-serif;
      background: #0d1117;
      color: #fff;
    }
    .view {
      display: none;
      padding: 20px;
    }
    .view.active {
      display: block;
    }

    /* HEADER */
    .header {
      text-align: center;
      margin-bottom: 20px;
    }
    .header h1 {
      margin: 0;
      font-size: 26px;
      font-weight: 700;
      color: #00aaff;
    }

    /* CARD */
    .card {
      background: #161b22;
      padding: 20px;
      border-radius: 14px;
      margin-bottom: 20px;
      box-shadow: 0 6px 15px rgba(0, 170, 255, 0.25);
    }

    /* BALANCE */
    .balance-amount {
      font-size: 28px;
      font-weight: 700;
      color: #00aaff;
      text-align: center;
      margin-top: 10px;
    }

    /* BUTTON */
    .btn {
      width: 100%;
      padding: 14px;
      font-size: 18px;
      font-weight: 700;
      border: none;
      border-radius: 12px;
      color: #fff;
      background: linear-gradient(90deg, #0088cc, #00aaff);
      box-shadow: 0 4px 10px rgba(0, 170, 255, 0.5);
      cursor: pointer;
      transition: 0.3s;
      margin-top: 15px;
    }
    .btn:hover:not(:disabled) {
      filter: brightness(1.1);
    }
    .btn:disabled {
      background: #555 !important;
      cursor: not-allowed;
      box-shadow: none;
    }

    /* SOCIAL BUTTON */
    .social-btn {
      width: 100%;
      padding: 14px;
      margin-top: 10px;
      font-size: 18px;
      font-weight: 700;
      border: none;
      border-radius: 12px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      color: #fff;
    }
    .facebook-btn {
      background: #1877f2;
    }
    .youtube-sub-btn {
      background: #ff0000;
    }
    .youtube-like-btn {
      background: #e62117;
    }

    /* INPUT */
    input, select {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 2px solid #00aaff;
      background: #0e1621;
      color: #fff;
      font-size: 16px;
      margin-top: 8px;
    }

    /* REFERRAL */
    #refLink {
      text-align: center;
      font-weight: 600;
      user-select: all;
    }

    /* NAV */
    .nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #161b22;
      display: flex;
      justify-content: space-around;
      padding: 12px 0;
      border-top: 1px solid #333;
      z-index: 10;
    }
    .nav button {
      background: none;
      border: none;
      color: #aaa;
      font-size: 14px;
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
    }
    .nav button.active {
      color: #00aaff;
      font-weight: 700;
    }

    /* WITHDRAWAL INPUT GROUPS */
    .input-group {
      margin-bottom: 15px;
    }
    .input-group label {
      font-weight: 600;
      color: #00aaff;
    }
  </style>
</head>
<body>

<!-- HOME -->
<div id="home-view" class="view active">
  <div class="header"><h1>üè† Profile</h1></div>
  <div class="card" style="text-align:center;">
    <h2 id="userName">User: </h2>
    <p id="userId">ID: </p>
    <div class="balance-amount" id="homeBalance">‡ß≥ 0.00</div>
  </div>
  <div class="card">
    <button id="fbFollowBtn" class="social-btn facebook-btn">üëç Facebook Follow</button>
    <button id="ytSubscribeBtn" class="social-btn youtube-sub-btn">‚ñ∂Ô∏è YouTube Subscribe</button>
    <button id="ytLikeBtn" class="social-btn youtube-like-btn">‚ù§Ô∏è YouTube Like</button>
  </div>
  <div class="card">
    <p>Referral Link:</p>
    <input type="text" id="refLink" readonly />
    <button class="btn" id="copyReferral">Copy Referral</button>
  </div>
</div>

<!-- TASKS -->
<div id="tasks-view" class="view">
  <div class="header"><h1>üìù Tasks</h1></div>
  <div class="card">
    <p>Each task earns 5‡ß≥ (Max 20 tasks)</p>
    <button class="btn" id="taskBtn">Complete Task +5‡ß≥</button>
    <p>Completed: <span id="taskCount">0</span>/20</p>
  </div>
</div>

<!-- ADS -->
<div id="ads-view" class="view">
  <div class="header"><h1>üì∫ Ads</h1></div>
  <div class="card">
    <p>Earn 5‡ß≥ per ad (Max 5 ads)</p>
    <button class="btn" id="adBtn1">Watch Ad 1 +5‡ß≥</button>
    <button class="btn" id="adBtn2">Watch Ad 2 +5‡ß≥</button>
    <p>Watched: <span id="adCount">0</span>/5</p>
  </div>
</div>

<!-- WALLET -->
<div id="wallet-view" class="view">
  <div class="header"><h1>üí∞ Wallet</h1></div>
  <div class="card">
    <h2>Your Balance</h2>
    <div class="balance-amount" id="walletBalance">‡ß≥ 0.00</div>
  </div>
  <button class="btn" onclick="showView('withdraw-view')">Withdraw Funds</button>
</div>

<!-- WITHDRAW -->
<div id="withdraw-view" class="view">
  <div class="header"><h1>Withdraw</h1></div>
  <div class="card">
    <h2>Available Balance</h2>
    <div class="balance-amount" id="withdrawBalanceDisplay">‡ß≥ 0.00</div>
    <p style="color:#aaa;">Minimum withdrawal: ‡ß≥100</p>
  </div>
  <div class="card">
    <div class="input-group">
      <label for="withdrawAmount">Amount</label>
      <input type="number" id="withdrawAmount" placeholder="Enter amount in ‡ß≥" />
    </div>
    <div class="input-group">
      <label for="paymentMethod">Payment Method</label>
      <select id="paymentMethod">
        <option value="bkash">bKash</option>
        <option value="nagad">Nagad</option>
      </select>
    </div>
    <div class="input-group">
      <label for="paymentNumber">Mobile Number</label>
      <input type="text" id="paymentNumber" placeholder="e.g. 01XXXXXXXXX" />
    </div>
    <button class="btn" onclick="handleWithdrawal()">Withdraw</button>
  </div>
</div>

<!-- NAVIGATION -->
<div class="nav">
  <button onclick="showView('home-view')" class="active">üè†<span>Home</span></button>
  <button onclick="showView('tasks-view')">üìù<span>Tasks</span></button>
  <button onclick="showView('ads-view')">üì∫<span>Ads</span></button>
  <button onclick="showView('wallet-view')">üí∞<span>Wallet</span></button>
</div>

<script>
  const tg = window.Telegram.WebApp;
  tg.expand();

  // === ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶¨‡¶∏‡¶æ‡¶¨‡ßá ===
  const taskUrl = "https://informationbdno1.blogspot.com/";  // Task ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶è‡¶á ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ì‡¶™‡ßá‡¶® ‡¶π‡¶¨‡ßá
  const adUrl1 = "https://informationbdno1.blogspot.com/";    // Ad 1 ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶è‡¶á ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ì‡¶™‡ßá‡¶® ‡¶π‡¶¨‡ßá
  const adUrl2 = "https://informationbdno1.blogspot.com/";    // Ad 2 ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶è‡¶á ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ì‡¶™‡ßá‡¶® ‡¶π‡¶¨‡ßá

  const fbUrl = "https://informationbdno1.blogspot.com/";
  const ytUrl = "https://informationbdno1.blogspot.com/";

  const state = {
    balanceInCents: 0,
    tasksCompleted: 0,
    adsWatched: 0,
    socialClicks: { fb: 0, ytSubscribe: 0, ytLike: 0, LIMIT: 3 }
  };

  function updateUI() {
    const balance = state.balanceInCents / 100;
    document.getElementById("homeBalance").textContent = `‡ß≥ ${balance.toFixed(2)}`;
    document.getElementById("walletBalance").textContent = `‡ß≥ ${balance.toFixed(2)}`;
    document.getElementById("withdrawBalanceDisplay").textContent = `‡ß≥ ${balance.toFixed(2)}`;
    document.getElementById("userName").textContent = "User: Telegram User";
    document.getElementById("userId").textContent = "ID: 123456";
    document.getElementById("taskCount").textContent = state.tasksCompleted;
    document.getElementById("adCount").textContent = state.adsWatched;
    document.getElementById("taskBtn").disabled = (state.tasksCompleted >= 20);
    document.getElementById("adBtn1").disabled = (state.adsWatched >= 5);
    document.getElementById("adBtn2").disabled = (state.adsWatched >= 5);
    document.getElementById("fbFollowBtn").disabled = (state.socialClicks.fb >= state.socialClicks.LIMIT);
    document.getElementById("ytSubscribeBtn").disabled = (state.socialClicks.ytSubscribe >= state.socialClicks.LIMIT);
    document.getElementById("ytLikeBtn").disabled = (state.socialClicks.ytLike >= state.socialClicks.LIMIT);
  }

  function showView(viewId) {
    document.querySelectorAll(".view").forEach(v => v.classList.remove("active"));
    document.getElementById(viewId).classList.add("active");

    const navButtons = document.querySelectorAll(".nav button");
    navButtons.forEach(btn => btn.classList.remove("active"));
    const viewMap = {
      "home-view": 0,
      "tasks-view": 1,
      "ads-view": 2,
      "wallet-view": 3
    };
    if(viewMap[viewId] !== undefined) {
      navButtons[viewMap[viewId]].classList.add("active");
    }
  }

  // Task ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞: ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ì‡¶™‡ßá‡¶® + ‡¶¨‡ßã‡¶®‡¶æ‡¶∏
  document.getElementById("taskBtn").addEventListener("click", () => {
    if(state.tasksCompleted < 20) {
      window.open(taskUrl, "_blank");  // ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ñ‡ßÅ‡¶≤‡¶¨‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡ßá
      state.tasksCompleted++;
      state.balanceInCents += 500;
      updateUI();
      alert("Task completed! +5‡ß≥");
    }
  });

  // Ad ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞: ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ì‡¶™‡ßá‡¶® + ‡¶¨‡ßã‡¶®‡¶æ‡¶∏
  function watchAd(url) {
    if(state.adsWatched < 5) {
      window.open(url, "_blank"); // ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ñ‡ßÅ‡¶≤‡¶¨‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡ßá
      state.adsWatched++;
      state.balanceInCents += 500;
      updateUI();
      alert("Thanks for watching the ad! +5‡ß≥");
    }
  }
  document.getElementById("adBtn1").addEventListener("click", () => watchAd(adUrl1));
  document.getElementById("adBtn2").addEventListener("click", () => watchAd(adUrl2));

  // Social buttons: ‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï, ‡¶á‡¶â‡¶ü‡¶ø‡¶â‡¶¨ ‡¶∏‡¶æ‡¶¨‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶æ‡¶á‡¶¨, ‡¶á‡¶â‡¶ü‡¶ø‡¶â‡¶¨ ‡¶≤‡¶æ‡¶á‡¶ï
  function handleSocialClick(type, url) {
    if(state.socialClicks[type] < state.socialClicks.LIMIT) {
      window.open(url, "_blank");
      state.socialClicks[type]++;
      state.balanceInCents += 500;
      updateUI();
      alert(`Thanks for your ${type} support! +5‡ß≥`);
    }
  }
  document.getElementById("fbFollowBtn").addEventListener("click", () => handleSocialClick('fb', fbUrl));
  document.getElementById("ytSubscribeBtn").addEventListener("click", () => handleSocialClick('ytSubscribe', ytUrl));
  document.getElementById("ytLikeBtn").addEventListener("click", () => handleSocialClick('ytLike', ytUrl));

  // Referral link copy
  document.getElementById("copyReferral").addEventListener("click", () => {
    const ref = document.getElementById("refLink");
    ref.select();
    ref.setSelectionRange(0, 99999);
    navigator.clipboard.writeText(ref.value).then(() => alert("Referral link copied!"));
  });
  document.getElementById("refLink").value = "https://t.me/kopmoneybd_bot?start=ref123456";

  // Withdraw function
  function handleWithdrawal() {
    const minWithdraw = 100;
    const amount = parseFloat(document.getElementById("withdrawAmount").value);
    const number = document.getElementById("paymentNumber").value.trim();
    const method = document.getElementById("paymentMethod").value;

    if (isNaN(amount) || amount < minWithdraw) {
      alert(`Minimum withdrawal is ‡ß≥${minWithdraw}`);
      return;
    }
    if (amount > state.balanceInCents / 100) {
      alert("Insufficient balance");
      return;
    }
    if (!/^01\d{9}$/.test(number)) {
      alert("Enter a valid Bangladeshi number (e.g. 01XXXXXXXXX)");
      return;
    }

    state.balanceInCents -= amount * 100;
    alert(`Withdrawal of ‡ß≥${amount} via ${method} requested.`);
    updateUI();
    showView("wallet-view");
  }

  updateUI();
</script>

</body>
</html>
