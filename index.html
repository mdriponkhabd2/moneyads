<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Telegram Mini App</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
body {margin:0;font-family:"Segoe UI",Arial,sans-serif;background:#0d1117;color:#fff;}
.view{display:none;padding:20px;}
.view.active{display:block;}
.header{text-align:center;margin-bottom:20px;}
.header h1{margin:0;font-size:26px;color:#00aaff;}
.card{background:#161b22;padding:20px;border-radius:14px;margin-bottom:20px;box-shadow:0 6px 15px rgba(0, 170, 255, 0.25);}
.balance-amount{font-size:28px;font-weight:700;color:#00aaff;text-align:center;margin-top:10px;}
.btn{width:100%;padding:14px;font-size:18px;font-weight:700;border:none;border-radius:12px;color:#fff;background:linear-gradient(90deg,#0088cc,#00aaff);box-shadow:0 4px 10px rgba(0, 170, 255, 0.5);cursor:pointer;transition:0.3s;margin-top:15px;}
.btn:hover:not(:disabled){filter:brightness(1.1);}
.btn:disabled{background:#555 !important;cursor:not-allowed;box-shadow:none;}
.input-group{margin-bottom:15px;}
.input-group label{font-weight:600;color:#00aaff;display:block;margin-bottom:6px;}
input,select{width:100%;padding:14px;border-radius:10px;border:2px solid #00aaff;background:#0e1621;color:#fff;font-size:16px;margin-top:8px;box-sizing:border-box;}
.nav{position:fixed;bottom:0;left:0;right:0;background:#161b22;display:flex;justify-content:space-around;padding:12px 0;border-top:1px solid #333;z-index:10;}
.nav button{background:none;border:none;color:#aaa;font-size:14px;font-weight:600;display:flex;flex-direction:column;align-items:center;cursor:pointer;}
.nav button.active{color:#00aaff;font-weight:700;}
.social-btn{width:100%;padding:14px;margin-top:10px;font-size:18px;font-weight:700;border:none;border-radius:12px;display:flex;justify-content:center;align-items:center;cursor:pointer;color:#fff;}
.facebook-btn{background:#1877f2;}
.youtube-sub-btn{background:#ff0000;}
.youtube-like-btn{background:#e62117;}
</style>
</head>
<body>

<!-- HOME -->
<div id="home-view" class="view active">
  <div class="header"><h1>üè† Profile</h1></div>
  <div class="card" style="text-align:center;">
    <h2 id="userName">User: </h2>
    <p id="userId">ID: </p>
    <div class="balance-amount" id="homeBalance">‡ß≥ 0.00</div>
  </div>
  <div class="card">
    <button id="fbFollowBtn" class="social-btn facebook-btn">üëç Facebook Follow</button>
    <button id="ytSubscribeBtn" class="social-btn youtube-sub-btn">‚ñ∂Ô∏è YouTube Subscribe</button>
    <button id="ytLikeBtn" class="social-btn youtube-like-btn">‚ù§Ô∏è YouTube Like</button>
  </div>
  <div class="card">
    <p>Referral Link:</p>
    <input type="text" id="refLink" readonly />
    <button class="btn" id="copyReferral">Copy Referral</button>
  </div>
</div>

<!-- TASKS -->
<div id="tasks-view" class="view">
  <div class="header"><h1>üìù Tasks</h1></div>
  <div class="card">
    <p>Each task earns 5‡ß≥ (Max 20 tasks)</p>
    <button class="btn" id="taskBtn">Complete Task +5‡ß≥</button>
    <p>Completed: <span id="taskCount">0</span>/20</p>
  </div>
</div>

<!-- ADS -->
<div id="ads-view" class="view">
  <div class="header"><h1>üì∫ Ads</h1></div>
  <div class="card">
    <p>Earn 5‡ß≥ per ad (Max 5 ads)</p>
    <button class="btn" id="adBtn1">Watch Ad 1 +5‡ß≥</button>
    <button class="btn" id="adBtn2">Watch Ad 2 +5‡ß≥</button>
    <p>Watched: <span id="adCount">0</span>/5</p>
  </div>
</div>

<!-- WALLET -->
<div id="wallet-view" class="view">
  <div class="header"><h1>üí∞ Wallet</h1></div>
  <div class="card">
    <h2>Your Balance</h2>
    <div class="balance-amount" id="walletBalance">‡ß≥ 0.00</div>
  </div>
  <button class="btn" onclick="showView('withdraw-view')">Withdraw Funds</button>
</div>

<!-- WITHDRAW -->
<div id="withdraw-view" class="view">
  <div class="header"><h1>Withdraw</h1></div>
  <div class="card">
    <h2>Available Balance</h2>
    <div class="balance-amount" id="withdrawBalanceDisplay">‡ß≥ 0.00</div>
    <p style="color:#aaa;">Minimum withdrawal: ‡ß≥100</p>
  </div>
  <div class="card">
    <div class="input-group">
      <label for="withdrawAmount">Amount</label>
      <input type="number" id="withdrawAmount" placeholder="Enter amount in ‡ß≥" />
    </div>
    <div class="input-group">
      <label for="paymentMethod">Payment Method</label>
      <select id="paymentMethod">
        <option value="bkash">bKash</option>
        <option value="nagad">Nagad</option>
      </select>
    </div>
    <div class="input-group">
      <label for="paymentNumber">Mobile Number</label>
      <input type="text" id="paymentNumber" placeholder="e.g. 01XXXXXXXXX" />
    </div>
    <button class="btn" onclick="handleWithdrawal()">Withdraw</button>
  </div>
</div>

<!-- NAVIGATION -->
<div class="nav">
  <button onclick="showView('home-view')" class="active">üè†<span>Home</span></button>
  <button onclick="showView('tasks-view')">üìù<span>Tasks</span></button>
  <button onclick="showView('ads-view')">üì∫<span>Ads</span></button>
  <button onclick="showView('wallet-view')">üí∞<span>Wallet</span></button>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

// State
const state = {
  balanceInCents:0,
  tasksCompleted:0,
  adsWatched:0,
  socialClicks:{fb:0,ytSubscribe:0,ytLike:0,LIMIT:3}
};

// Social URLs
const fbUrl = "https://informationbdno1.blogspot.com";
const ytSubscribeUrl = "https://informationbdno1.blogspot.com/";
const ytLikeUrl = "https://informationbdno1.blogspot.com";

// Init User
function initUser(){
  const user = tg.initDataUnsafe.user;
  document.getElementById("userName").innerText = "User: " + user.first_name + " " + (user.last_name||"");
  document.getElementById("userId").innerText = "ID: " + user.id;
  document.getElementById("refLink").value = `https://t.me/kopmoneybd_bot?start=${user.id}`;
}

// Copy Referral
document.getElementById("copyReferral").addEventListener("click", ()=>{
  const ref = document.getElementById("refLink");
  ref.select();
  ref.setSelectionRange(0,99999);
  navigator.clipboard.writeText(ref.value).then(()=>alert("Referral link copied! ‚úÖ"));
});

// Tasks
document.getElementById("taskBtn").addEventListener("click", ()=>{
  if(state.tasksCompleted<20){
    state.tasksCompleted++;
    state.balanceInCents+=500;
    updateUI();
    window.open("https://informationbdno1.blogspot.com","_blank");
    alert("Task completed! +5‡ß≥");
  }
});

// Ads
function watchAd(url){
  if(state.adsWatched<5){
    state.adsWatched++;
    state.balanceInCents+=500;
    updateUI();
    window.open(url,"_blank");
    alert("Thanks for watching ad! +5‡ß≥");
  }
}
document.getElementById("adBtn1").addEventListener("click",()=>watchAd("https://informationbdno1.blogspot.com"));
document.getElementById("adBtn2").addEventListener("click",()=>watchAd("https://informationbdno1.blogspot.com"));

// Social Buttons
function handleSocialClick(type,url){
  if(state.socialClicks[type]<state.socialClicks.LIMIT){
    window.open(url,"_blank");
    state.socialClicks[type]++;
    state.balanceInCents+=500;
    updateUI();
    alert(`Thanks for your ${type} support! +5‡ß≥`);
  } else {
    alert("You reached the limit for this action.");
  }
}
document.getElementById("fbFollowBtn").addEventListener("click", ()=>handleSocialClick('fb', fbUrl));
document.getElementById("ytSubscribeBtn").addEventListener("click", ()=>handleSocialClick('ytSubscribe', ytSubscribeUrl));
document.getElementById("ytLikeBtn").addEventListener("click", ()=>handleSocialClick('ytLike', ytLikeUrl));

// Navigation
function showView(viewId){
  document.querySelectorAll(".view").forEach(v=>v.classList.remove("active"));
  document.getElementById(viewId).classList.add("active");
  document.querySelectorAll(".nav button").forEach(b=>b.classList.remove("active"));
  document.querySelector(`.nav button[onclick="showView('${viewId}')"]`).classList.add("active");
}

// Withdraw
function handleWithdrawal(){
  const amount=parseFloat(document.getElementById("withdrawAmount").value);
  const number=document.getElementById("paymentNumber").value.trim();
  const method=document.getElementById("paymentMethod").value;
  if(isNaN(amount)||amount<100){alert("Minimum withdrawal is ‡ß≥100"); return;}
  if(amount>(state.balanceInCents/100)){alert("Insufficient balance"); return;}
  if(!/^01\d{9}$/.test(number)){alert("Enter valid number"); return;}
  const user=tg.initDataUnsafe.user;
  const msg=`--- Withdrawal ---\nUser ID: ${user.id}\nName: ${user.first_name} ${user.last_name||""}\nAmount: ${amount}‡ß≥\nMethod: ${method}\nNumber: ${number}`;
  tg.sendData(msg);
  alert("Withdrawal request sent ‚úÖ");
  state.balanceInCents-=amount*100;
  updateUI();
  document.getElementById("withdrawAmount").value="";
  document.getElementById("paymentNumber").value="";
  showView("wallet-view");
}

// Update UI
function updateUI(){
  const bal=`‡ß≥ ${(state.balanceInCents/100).toFixed(2)}`;
  document.getElementById("homeBalance").innerText=bal;
  document.getElementById("walletBalance").innerText=bal;
  document.getElementById("withdrawBalanceDisplay").innerText=bal;
  document.getElementById("taskCount").innerText=state.tasksCompleted;
  document.getElementById("adCount").innerText=state.adsWatched;
}

// Init
initUser();
updateUI();

</script>
</body>
</html>
